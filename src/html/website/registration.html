<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration page</title>
    <link rel="stylesheet" href="../../../dist/output.css">
</head>

<body>
    <section class="px-20 py-10 min-w-full  bg-slate-50">
        <div class="  border-black border rounded-lg min-w-5xl bg-white  m-auto">
            <div class=" p-10 space-y-2  ">
                <div class="w-16 h-16">
                    <img src="../gaming-logo-49563.png" alt="img1" class="w-full h-full object-cover">
                </div>
                <form action="#" class="space-y-2" id="myForm">
                    <h1 class="text-4xl font-semibold">Create your account</h1>
                    <p class="text-sm text-gray-400">Lorem ipsum dolor sit amet consectetur adipisicing elit. Incidunt
                        soluta ratione ut fugiat</p>
                    <div class="flex border ">
                        <div class="flex items-center">
                            <label for="firstName">FirstName
                            </label>
                            <input type="text" id="firstName" class="rounded-md  border p-3 " name="FirstName"
                                maxlength="20" minlength="3">
                            <p class="text-red-600 text-sm hidden" id="firstNameErrormsg">please enter FirstName</p>
                        </div>
                        <div class="flex items-center">
                            <label for="lastName">
                                LastName
                            </label>
                            <input type="text" id="lastName" class="rounded-md border p-3 w-full" name="LastName"
                                maxlength="20" minlength="3">
                            <p class="text-red-600 text-sm hidden" id="lastNameErrorMsg">please enter LastName</p>
                        </div>
                    </div>
                    <div>
                        <label for="gmail" class="">
                            Gmail Address
                            <input type="email" id="gmail" class="rounded-md  border p-3 w-full" name="Gmail">
                            <p class="text-red-600 text-sm hidden" id="gmailErrorMsg">please Enter Gmail</p>
                        </label>

                        <label for="selectOption">
                            <h2>Gender</h2>
                            <select name="selectOption" id="selectOption" class="border-black border p-1  w-full">
                                <option value="Default">Default</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Transgender">Transgender</option>
                            </select>
                            <p class="text-red-600 text-sm hidden" id="genderErrorMsg">please Select Gender</p>
                        </label>

                        <div>
                            <h2> Are you 18+ </h2>
                            <label for="yes">
                                <input type="radio" name="age" id="yes">
                                Yes
                            </label>
                            <label for="no">
                                <input type="radio" name="age" id="no">
                                No
                            </label>
                            <p class="text-red-600 text-sm hidden " id="ageError"> please select </p>
                        </div>
                        <div>

                            <label for="Password">
                                Password
                                <input type="password" id="Password" class="rounded-md border p-3 w-full" name="Password">
                                <p class="text-red-600 text-sm hidden " id="passwordErrorMsg"> please enter password </p>
                            </label>
                            <label for="ConfirmPassword">
                                Confirm Password
                                <input type="password" id="ConfirmPassword" class="rounded-md border p-3 w-full"
                                name="Confirm_Password">
                                <p class="text-red-600 text-sm hidden " id="confirmPasswordErrorMsg"> please enter same
                                    password as
                                    above </p>
                                </label>
                                
                            </div>
                        <div>
                            <label for="bloodGroup">
                                Blood Group
                            </label>
                            <input type="text" id="bloodGroup" class="rounded-md  border p-3" name="bloodGroup">
                            <!-- <p class="text-red-600 text-sm hidden" id="firstNameErrormsg">please enter FirstName</p> -->
                            <label for="Phone">
                                Phone number
                                <input type="tel" id="Phone" class="rounded-md  border p-3" name="bloodGroup">
                                <!-- <p class="text-red-600 text-sm hidden" id="firstNameErrormsg">please enter FirstName</p> -->
                            </label>
                        </div>
                        <div class="flex items-center">
                            <label for="currentAddres">
                                Current Address
                            </label>
                            <textarea name="currentAddres" id="currentAddres" cols="30" rows="4"
                                placeholder="Enter your currentAddres" class="border"></textarea>
                            <label for="permanentAddress">
                                Permanent Address
                            </label>
                            <textarea name="permanentAddress" id="permanentAddress" cols="30" rows="4" class="border"
                                placeholder="Enter your permanentAddress"></textarea>
                            </label>
                        </div>

                        <div class="flex justify-between w-full">
                            <a href="#">Already have an account? <span class="font-bold">Sign in</span> </a>
                            <button type="submit" class="px-2 py-1 rounded text-white bg-orange-400" id="submitBtn">
                                Create
                                Account</button>
                        </div>
                    </div>
                </form>
            </div>
    </section>
    <section>
        <ul id="notes"></ul>
    </section>
    <script>
        (function () {
            
            const formData = {
                form: document.getElementById('myForm'),
                uniqId : Date.now(),
                firstNameErrorMsg: document.getElementById('firstName'),
                lastNameErrorMsg: document.getElementById('lastName'),
                // gender error
                genderErrorMsg: document.getElementById('selectOption'),
                genderError: document.querySelector("#genderErrorMsg"),
                // Email error
                gmailErrorMsg: document.getElementById('gmail'),
                gmailError: document.querySelector("#gmailErrorMsg"),
                // age error msg
                ageErrorMsg: document.querySelectorAll("input[name = 'age']"),
                passwordErrorMsg: document.querySelector("#Password"),
                confirmPasswordErrorMsg: document.querySelector("#ConfirmPassword"),

                notes: document.querySelector('#notes'),

                // local storage
                notesStorage: localStorage.getItem("notes") ? JSON.parse(localStorage.getItem("notes")) : [],
                updateStorage: function () {
                    localStorage.setItem("notes", JSON.stringify(this.notesStorage));
                },
                
                render: function () {
                    // FirstNameErrorMsg
                    this.firstNameErrorMsg.addEventListener('input', () => {
                        if (this.firstNameErrorMsg.value.trim() == '') {
                            document.querySelector('#firstNameErrormsg').classList.remove("hidden")
                            console.log( this.uniqId);
                        }
                        else {
                            document.querySelector('#firstNameErrormsg').classList.add("hidden")
                        }
                    })
                    // lastNameErrorMsg
                    this.lastNameErrorMsg.addEventListener("input", () => {
                        if (this.lastNameErrorMsg.value.trim() == '') {
                            document.querySelector('#lastNameErrorMsg').classList.remove("hidden")
                        }
                        else {
                            document.querySelector('#lastNameErrorMsg').classList.add("hidden")
                        }
                    })
                    // email Error msg
                    this.gmailErrorMsg.addEventListener("input", () => {
                        if (this.gmailErrorMsg.value.trim() == '') {
                            this.gmailError.classList.remove("hidden")
                        }
                        else {
                            this.gmailError.classList.add("hidden")
                        }
                    })
                    // gender error msg
                    this.genderErrorMsg.addEventListener("change", () => {
                        if (this.genderErrorMsg.value === 'Default') {
                            this.genderError.classList.remove("hidden")
                        }
                        else {
                            this.genderError.classList.add("hidden")
                        }
                    })
                    // radio button error msg
                    this.ageErrorMsg.forEach(element => {
                        element.addEventListener("change", (event) => {
                            if (!event.target.checked) {
                                document.querySelector('#ageError').classList.remove("hidden");
                            } else {
                                document.querySelector('#ageError').classList.add("hidden");
                            }
                        });
                    });
                    // password error msg
                    this.passwordErrorMsg.addEventListener("input", () => {
                        let passwordError = document.querySelector("#passwordErrorMsg")
                        if (this.passwordErrorMsg.value.trim() == "") {
                            passwordError.classList.remove("hidden");
                        }
                        else {
                            passwordError.classList.add("hidden");
                        }
                    })
                    // confirm password error msg
                    this.confirmPasswordErrorMsg.addEventListener("input", () => {
                        if (this.confirmPasswordErrorMsg.value.trim() == "") {
                            document.querySelector("#confirmPasswordErrorMsg").classList.remove("hidden");
                        }
                        else {
                            document.querySelector("#confirmPasswordErrorMsg").classList.add("hidden");
                        }
                    })

                    // form part start here 
                    this.form.addEventListener('submit', (event) => {
                        event.preventDefault();
                        console.log(this.uniqId);
                        // if (this.password !== this.confirmPassword) {
                        //     alert('Passwords do not match. Please enter the same password in both fields.');
                        //     this.passwordInput.value = ''; // Clear password fields
                        //     this.confirmPasswordInput.value = '';
                        //     return;
                        // }

                        const formobj = new FormData(this.form);
                        let formDataObj = {};
                        formDataObj.id = Date.now()
                        formobj.forEach((value, key) => {
                            formDataObj[key] = value;
                            // formDataObj[key] = Id;
                            // });
                            // fetch('/api/register',{
                            //     method: 'POST',
                            //     body: JSON.stringify(formDataObj),
                            //     headers:{
                            //         "Content-Type":'application/json'
                            //         },
                            //         }).then(res=> res.text())
                            //         .then(data=> console.log(data))
                            //         .catch(err=>console.error(err));
                            //         });
                                    // end of the form part
                                    

                             
                        });

                        if (this.firstNameErrorMsg.value.length > 0 &&
                            this.lastNameErrorMsg.value.length > 0 &&
                            this.gmailErrorMsg.value.length > 0) {
                            this.notesStorage.push(formDataObj);
                            this.updateStorage()
                            window.location.href = 'userData.html';
                        } else {
                            document.getElementById('firstNameErrormsg').classList.remove("hidden");
                            document.getElementById('lastNameErrorMsg').classList.remove("hidden");
                            document.getElementById('gmailErrorMsg').classList.remove('hidden');
                            document.getElementById('genderErrorMsg').classList.remove("hidden");
                            document.getElementById('passwordErrorMsg').classList.remove("hidden");
                            document.getElementById('confirmPasswordErrorMsg').classList.remove("hidden");
                            document.getElementById('ageError').classList.remove("hidden");
                        }

                        document.getElementById('myForm').reset();
                    });

                }
                // render function end

            }
            formData.render()
        })()

    </script>

</body>

</html>